# Copyright The SimpleKernel Contributors
# CMake build configuration

# 设置项目名与版本
PROJECT (doc VERSION 0.0.1)

# 设置 doxygen 相关参数
SET (DOXYGEN_HAVE_DOT YES)
SET (DOXYGEN_DOT_MULTI_TARGETS YES)
SET (DOXYGEN_GENERATE_LATEX NO)
SET (DOXYGEN_PROJECT_NAME ${CMAKE_PROJECT_NAME})
SET (DOXYGEN_PROJECT_NUMBER ${CMAKE_PROJECT_VERSION})
SET (DOXYGEN_PROJECT_BRIEF ${PROJECT_DESCRIPTION})
SET (DOXYGEN_RECURSIVE YES)
SET (
    DOXYGEN_EXCLUDE_PATTERNS
    */3rd/*,
    */.vscode/*,
    */.idea/*,
    */.github/*,
    */.git/*,
    */build*/*,
    */cmake-/*)
SET (DOXYGEN_OUTPUT_DIRECTORY ${PROJECT_SOURCE_DIR})
SET (DOXYGEN_EXTRACT_ALL YES)
SET (DOXYGEN_EXTRACT_PRIVATE YES)
SET (DOXYGEN_EXTRACT_STATIC YES)
SET (DOXYGEN_EXTRACT_LOCAL_CLASSES YES)
SET (DOXYGEN_SOURCE_BROWSER YES)
SET (DOXYGEN_INLINE_SOURCES YES)
SET (DOXYGEN_ALPHABETICAL_INDEX YES)
SET (DOXYGEN_GENERATE_TREEVIEW YES)
SET (DOXYGEN_ENABLE_PREPROCESSING YES)
SET (DOXYGEN_CLASS_DIAGRAMS YES)
SET (DOXYGEN_CLASS_GRAPH YES)
SET (DOXYGEN_GRAPHICAL_HIERARCHY YES)
SET (DOXYGEN_CALLER_GRAPH YES)
SET (DOXYGEN_CALL_GRAPH YES)
SET (DOXYGEN_UML_LOOK YES)
SET (DOXYGEN_HTML_TIMESTAMP YES)

# 创建 target 并通过 VERBATIM 将 cmake 参数传递给 doxygen
DOXYGEN_ADD_DOCS (
    doc
    COMMENT "Generating docs at ${PROJECT_SOURCE_DIR}/html/index.html ..."
    WORKING_DIRECTORY ${PROJECT_SOURCE_DIR} ${CMAKE_SOURCE_DIR})
